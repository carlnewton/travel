class Locations{constructor(){this.list=[{name:"Desborough",country:"United Kingdom",stay:!0,coordinates:{lat:52.442578,lng:-.822131},date:"2022-09-14"},{name:"Birmingham",country:"United Kingdom",stay:!1,coordinates:{lat:52.452804,lng:-1.743625},date:"2022-09-14"},{name:"Dubai",country:"United Arab Emirates",stay:!1,coordinates:{lat:25.253252,lng:55.365629},date:"2022-09-14"},{name:"Bangkok",country:"Thailand",stay:!0,coordinates:{lat:13.690238,lng:100.750123},date:"2022-09-15"},{name:"Chiang Mai",country:"Thailand",stay:!0,coordinates:{lat:18.798743,lng:98.984619},date:"2022-09-22"},{name:"Pai",country:"Thailand",stay:!0,coordinates:{lat:19.361766,lng:98.431362},date:"2022-09-28"},{name:"Chiang Mai",country:"Thailand",stay:!0,hideLine:!0,coordinates:{lat:18.798743,lng:98.984619},date:"2022-10-11"},{name:"Bangkok",country:"Thailand",stay:!0,hideLine:!0,coordinates:{lat:13.690238,lng:100.750123},date:"2022-10-12"},{name:"Vientiane",country:"Laos",stay:!0,coordinates:{lat:17.986967,lng:102.567794},date:"2022-10-13"},{name:"Vang Vieng",country:"Laos",stay:!0,coordinates:{lat:18.947304,lng:102.447513},date:"2022-10-20"},{name:"Luang Prabang",country:"Laos",stay:!0,coordinates:{lat:19.884847,lng:102.137962},date:"2022-10-27"},{name:"Hanoi",country:"Vietnam",stay:!0,coordinates:{lat:21.027463,lng:105.700739},date:"2022-11-09"},{name:"Sa Pa",country:"Vietnam",stay:!0,coordinates:{lat:22.357358,lng:103.821707},date:"2022-11-13"},{name:"Ha Long",country:"Vietnam",stay:!0,coordinates:{lat:20.971314,lng:107.044734},date:"2022-11-18"},{name:"Hanoi",country:"Vietnam",stay:!0,coordinates:{lat:21.027463,lng:105.700739},date:"2022-11-22"},{name:"Phú Quốc",country:"Vietnam",stay:!0,coordinates:{lat:10.299451,lng:103.984889},date:"2022-11-23"},{name:"Ho Chi Minh City",country:"Vietnam",stay:!0,coordinates:{lat:10.833258,lng:106.630088},date:"2022-12-03"},{name:"Phnom Penh",country:"Cambodia",stay:!0,coordinates:{lat:11.582391,lng:104.858257},date:"2022-12-07"},{name:"Siem Reap",country:"Cambodia",stay:!0,coordinates:{lat:13.366145,lng:103.8371},date:"2022-12-10"},{name:"Kuala Lumpur",country:"Malaysia",stay:!0,coordinates:{lat:3.149072,lng:101.689837},date:"2022-12-17"},{name:"Phuket",country:"Thailand",stay:!0,coordinates:{lat:7.882328,lng:98.392311},date:"2022-12-27"}]}}class Markers{constructor(){this.rippleSeconds=10,this.rippleSize=100,this.markers=[],this.ripples=[],this.locations=new Locations}getBounds(){var e=new google.maps.LatLngBounds;for(let t of this.markers.slice(-10))e.extend(t.position);return e}getIconProperties(){return{path:google.maps.SymbolPath.CIRCLE,fillOpacity:0,strokeColor:"#ffffff",strokeWeight:2,scale:3}}run(){this.createMarkers(),this.updateStats()}updateStats(){var e=0;for(let t=1;t<this.markers.length;t++)this.isFuture(this.markers[t].date)||(e+=this.markerDistance(this.markers[t],this.markers[t-1]));document.getElementById("distance").innerText=Math.round(e).toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")+" miles";var t=new Date(this.locations.list[0].date);document.getElementById("time").innerText=this.timeBetween(t,new Date);Math.floor((new Date-t)/1e3);document.getElementById("stayed").innerText=this.getStayedCount(),document.getElementById("countries").innerText=this.getUniqueCountries().length;var a=this.getNextMarker();if(a){var o=this.timeBetween(new Date,Date.parse(a.date));document.getElementById("next").innerText=o}}isFuture(e){return new Date-new Date(e)<0}getStayedCount(){let e=0;for(let t of this.getUniqueLocations())this.isFuture(t.date)||!1!==t.stay&&e++;return e-1}getUniqueLocations(){let e=[];e:for(let t of this.locations.list){for(let a of e)if(t.coordinates.lat===a.coordinates.lat&&t.coordinates.lng===a.coordinates.lng)continue e;e.push(t)}return e}getUniqueCountries(){let e=[];for(let t of this.locations.list)e.includes(t.country)||!0!==t.stay||"United Kingdom"===t.country||e.push(t.country);return e}getNextMarker(){for(let t of this.locations.list)if(this.isFuture(t.date)){var e=t;break}if(void 0!==e)for(let t of this.markers)if(t.name===e.name&&t.date===e.date)return t}getLatestMarker(){for(let t of this.locations.list)if(!this.isFuture(t.date))var e=t;for(let t of this.markers)if(t.name===e.name&&t.date===e.date)return t}createMarkers(){var e=null;for(let r of this.locations.list){var t="#FFFFFF",a="#d59563";if(this.isFuture(r.date)&&(t="#3B8686",a="#3B8686"),e&&!0!==r.hideLine){var o=[];o.push(e),o.push(r.coordinates),new google.maps.Polyline({path:o,geodesic:!0,strokeColor:t,strokeOpacity:.4,strokeWeight:2}).setMap(map)}var n=new google.maps.Marker({name:r.name,date:r.date,time:Date.now(),position:r.coordinates,map:map,label:{text:r.name.toUpperCase(),color:a,fontSize:"14px",fontWeight:"bold"},delete:!1});n.setIcon({path:google.maps.SymbolPath.CIRCLE,fillOpacity:0,strokeWeight:0,scale:0}),this.markers.push(n),map.fitBounds(markers.getBounds()),e=r.coordinates}var r=this.getLatestMarker(),s=this;setInterval((function(){s.animateMarker(r)}),30)}timeBetween(e,t){var a=Math.floor((t-e)/1e3),o=a/31536e3;return o>1?Math.floor(o)+" year"+(1===Math.floor(o)?"":"s"):(o=a/2592e3)>1?Math.floor(o)+" month"+(1===Math.floor(o)?"":"s"):(o=a/86400)>1?Math.floor(o)+" day"+(1===Math.floor(o)?"":"s"):(o=a/3600)>1?Math.floor(o)+" hour"+(1===Math.floor(o)?"":"s"):(o=a/60)>1?Math.floor(o)+" minute"+(1===Math.floor(o)?"":"s"):Math.floor(a)+" second"+(1===Math.floor(o)?"":"s")}markerDistance(e,t){var a=e.position.lat()*(Math.PI/180),o=t.position.lat()*(Math.PI/180),n=o-a,r=(t.position.lng()-e.position.lng())*(Math.PI/180);return 7917.6*Math.asin(Math.sqrt(Math.sin(n/2)*Math.sin(n/2)+Math.cos(a)*Math.cos(o)*Math.sin(r/2)*Math.sin(r/2)))}animateMarker(e){var t=(Date.now()-e.time)/(1e3*this.rippleSeconds)*100,a=this.rippleSize*t/100;if(t<100){(o=this.getIconProperties()).scale=a,o.strokeOpacity=1-t/100,e.setIcon(o),e.setLabel({text:e.label.text,color:"#ffffff",fontSize:"18px",fontWeight:"bold"})}else{e.time=Date.now();var o=this.getIconProperties();e.setIcon(o)}}getMarker(e){for(let t of this.markers)if(t.name===e)return t}markerExists(e){for(let t of this.markers)if(t.name===e)return!0;return!1}}var map,markers=new Markers;function initMap(){map=new google.maps.Map(document.getElementById("map"),{center:{lat:20,lng:-120},zoom:3,styles:[{elementType:"geometry",stylers:[{color:"#0B486B"}]},{elementType:"labels.text.stroke",stylers:[{color:"#3B8686"}]},{elementType:"labels.text.fill",stylers:[{visibility:"off"}]},{featureType:"administrative.locality",elementType:"labels.text.fill",stylers:[{visibility:"off"}]},{featureType:"poi",elementType:"labels.text.fill",stylers:[{visibility:"off"}]},{featureType:"road",elementType:"geometry",stylers:[{visibility:"off"}]},{featureType:"road",elementType:"geometry.stroke",stylers:[{visibility:"off"}]},{featureType:"road",elementType:"labels",stylers:[{visibility:"off"}]},{featureType:"road.highway",elementType:"geometry",stylers:[{visibility:"off"}]},{featureType:"road.highway",elementType:"geometry.stroke",stylers:[{visibility:"off"}]},{featureType:"transit",elementType:"geometry",stylers:[{color:"#2f3948"}]},{featureType:"transit.station",elementType:"labels.text.fill",stylers:[{visibility:"off"}]},{featureType:"water",elementType:"geometry",stylers:[{color:"#17263c"}]},{featureType:"water",elementType:"labels.text.fill",stylers:[{color:"#515c6d"}]},{featureType:"water",elementType:"labels.text.stroke",stylers:[{color:"#17263c"}]}]}),markers.run()}