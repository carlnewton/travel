class Locations{constructor(){this.list=[{name:"United Kingdom",coordinates:{lat:52.452804,lng:-1.743625},date:"2022-09-14"},{name:"Dubai",coordinates:{lat:25.253252,lng:55.365629},date:"2022-09-14"},{name:"Bangkok",coordinates:{lat:13.690238,lng:100.750123},date:"2022-09-15"},{name:"Chiang Mai",coordinates:{lat:18.798743,lng:98.984619},date:"2022-09-22"},{name:"Pai",coordinates:{lat:19.361766,lng:98.431362},date:"2022-09-28"}]}}class Markers{constructor(){this.rippleSeconds=10,this.rippleSize=100,this.markers=[],this.ripples=[],this.locations=new Locations}getBounds(){var e=new google.maps.LatLngBounds;for(let t of this.markers.slice(-3))e.extend(t.position);return e}getIconProperties(){return{path:google.maps.SymbolPath.CIRCLE,fillOpacity:0,strokeColor:"#ffffff",strokeWeight:2,scale:3}}run(){this.createMarkers(),this.updateStats()}updateStats(){var e=0;for(let t=1;t<this.markers.length;t++)e+=this.markerDistance(this.markers[t],this.markers[t-1]);document.getElementById("distance").innerText=Math.round(e)+" mi";var t=new Date(this.locations.list[0].date);document.getElementById("time").innerText=this.timeSince(t);var a=e/(Math.floor((new Date-t)/1e3)/3600);document.getElementById("speed").innerText=Math.round(a)+" mph"}createMarkers(){var e=null;for(let s of this.locations.list){if(e){var t=[];t.push(e),t.push(s.coordinates),new google.maps.Polyline({path:t,geodesic:!0,strokeColor:"#FFFFFF",strokeOpacity:.4,strokeWeight:2}).setMap(map)}var a=new google.maps.Marker({name:s.name,time:Date.now(),position:s.coordinates,map:map,label:{text:s.name.toUpperCase(),color:"#d59563",fontSize:"14px",fontWeight:"bold"},delete:!1});a.setIcon({path:google.maps.SymbolPath.CIRCLE,fillOpacity:0,strokeWeight:0,scale:0}),this.markers.push(a),map.fitBounds(markers.getBounds()),e=s.coordinates}var s=this.locations.list[this.locations.list.length-1],r=this.getMarker(s.name),o=this;setInterval((function(){o.animateMarker(r)}),30)}timeSince(e){var t=Math.floor((new Date-e)/1e3),a=t/31536e3;return a>1?Math.floor(a)+" years":(a=t/2592e3)>1?Math.floor(a)+" months":(a=t/86400)>1?Math.floor(a)+" days":(a=t/3600)>1?Math.floor(a)+" hours":(a=t/60)>1?Math.floor(a)+" minutes":Math.floor(t)+" seconds"}markerDistance(e,t){var a=e.position.lat()*(Math.PI/180),s=t.position.lat()*(Math.PI/180),r=s-a,o=(t.position.lng()-e.position.lng())*(Math.PI/180);return 7917.6*Math.asin(Math.sqrt(Math.sin(r/2)*Math.sin(r/2)+Math.cos(a)*Math.cos(s)*Math.sin(o/2)*Math.sin(o/2)))}animateMarker(e){var t=(Date.now()-e.time)/(1e3*this.rippleSeconds)*100,a=this.rippleSize*t/100;if(t<100){(s=this.getIconProperties()).scale=a,s.strokeOpacity=1-t/100,e.setIcon(s),e.setLabel({text:e.label.text,color:"#ffffff",fontSize:"18px",fontWeight:"bold"})}else{e.time=Date.now();var s=this.getIconProperties();e.setIcon(s)}}getMarker(e){for(let t of this.markers)if(t.name===e)return t}markerExists(e){for(let t of this.markers)if(t.name===e)return!0;return!1}}var map,markers=new Markers;function initMap(){map=new google.maps.Map(document.getElementById("map"),{center:{lat:20,lng:-120},zoom:3,styles:[{elementType:"geometry",stylers:[{color:"#0B486B"}]},{elementType:"labels.text.stroke",stylers:[{color:"#3B8686"}]},{elementType:"labels.text.fill",stylers:[{visibility:"off"}]},{featureType:"administrative.locality",elementType:"labels.text.fill",stylers:[{visibility:"off"}]},{featureType:"poi",elementType:"labels.text.fill",stylers:[{visibility:"off"}]},{featureType:"road",elementType:"geometry",stylers:[{visibility:"off"}]},{featureType:"road",elementType:"geometry.stroke",stylers:[{visibility:"off"}]},{featureType:"road",elementType:"labels",stylers:[{visibility:"off"}]},{featureType:"road.highway",elementType:"geometry",stylers:[{visibility:"off"}]},{featureType:"road.highway",elementType:"geometry.stroke",stylers:[{visibility:"off"}]},{featureType:"transit",elementType:"geometry",stylers:[{color:"#2f3948"}]},{featureType:"transit.station",elementType:"labels.text.fill",stylers:[{visibility:"off"}]},{featureType:"water",elementType:"geometry",stylers:[{color:"#17263c"}]},{featureType:"water",elementType:"labels.text.fill",stylers:[{color:"#515c6d"}]},{featureType:"water",elementType:"labels.text.stroke",stylers:[{color:"#17263c"}]}]}),markers.run()}