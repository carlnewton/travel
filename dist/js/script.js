class Locations{constructor(){this.list=[{name:"United Kingdom",coordinates:{lat:52.452804,lng:-1.743625},date:"2022-09-14"},{name:"Bangkok",coordinates:{lat:13.690238,lng:100.750123},date:"2022-09-15"},{name:"Chiang Mai",coordinates:{lat:18.798743,lng:98.984619},date:"2022-09-22"}]}}class Markers{constructor(){this.rippleSeconds=10,this.rippleSize=100,this.markers=[],this.ripples=[],this.locations=new Locations}getBounds(){var e=new google.maps.LatLngBounds;for(let t of this.markers)e.extend(t.position);return e}getIconProperties(){return{path:google.maps.SymbolPath.CIRCLE,fillOpacity:0,strokeColor:"#ffffff",strokeWeight:2,scale:3}}run(){this.createMarkers(),this.updateStats()}updateStats(){var e=0;for(let t=1;t<this.markers.length;t++)e+=this.markerDistance(this.markers[t],this.markers[t-1]);document.getElementById("distance").innerText=Math.round(e)+" mi";var t=new Date(this.locations.list[0].date);document.getElementById("time").innerText=this.timeSince(t);var s=e/(Math.floor((new Date-t)/1e3)/3600);document.getElementById("speed").innerText=Math.round(s)+" mph"}createMarkers(){var e=null;for(let r of this.locations.list){if(e){var t=[];t.push(e),t.push(r.coordinates),new google.maps.Polyline({path:t,geodesic:!0,strokeColor:"#FFFFFF",strokeOpacity:.4,strokeWeight:2}).setMap(map)}var s=new google.maps.Marker({name:r.name,time:Date.now(),position:r.coordinates,map:map,label:{text:r.name.toUpperCase(),color:"#d59563",fontSize:"14px",fontWeight:"bold"},delete:!1});s.setIcon({path:google.maps.SymbolPath.CIRCLE,fillOpacity:0,strokeWeight:0,scale:0}),this.markers.push(s),map.fitBounds(markers.getBounds()),e=r.coordinates}var r=this.locations.list[this.locations.list.length-1],a=this.getMarker(r.name),o=this;setInterval((function(){o.animateMarker(a)}),30)}timeSince(e){var t=Math.floor((new Date-e)/1e3),s=t/31536e3;return s>1?Math.floor(s)+" years":(s=t/2592e3)>1?Math.floor(s)+" months":(s=t/86400)>1?Math.floor(s)+" days":(s=t/3600)>1?Math.floor(s)+" hours":(s=t/60)>1?Math.floor(s)+" minutes":Math.floor(t)+" seconds"}markerDistance(e,t){var s=e.position.lat()*(Math.PI/180),r=t.position.lat()*(Math.PI/180),a=r-s,o=(t.position.lng()-e.position.lng())*(Math.PI/180);return 7917.6*Math.asin(Math.sqrt(Math.sin(a/2)*Math.sin(a/2)+Math.cos(s)*Math.cos(r)*Math.sin(o/2)*Math.sin(o/2)))}animateMarker(e){var t=(Date.now()-e.time)/(1e3*this.rippleSeconds)*100,s=this.rippleSize*t/100;if(t<100){(r=this.getIconProperties()).scale=s,r.strokeOpacity=1-t/100,e.setIcon(r),e.setLabel({text:e.label.text,color:"#ffffff",fontSize:"18px",fontWeight:"bold"})}else{e.time=Date.now();var r=this.getIconProperties();e.setIcon(r)}}getMarker(e){for(let t of this.markers)if(t.name===e)return t}markerExists(e){for(let t of this.markers)if(t.name===e)return!0;return!1}}var map,markers=new Markers;function initMap(){map=new google.maps.Map(document.getElementById("map"),{center:{lat:20,lng:-120},zoom:3,styles:[{elementType:"geometry",stylers:[{color:"#0B486B"}]},{elementType:"labels.text.stroke",stylers:[{color:"#3B8686"}]},{elementType:"labels.text.fill",stylers:[{visibility:"off"}]},{featureType:"administrative.locality",elementType:"labels.text.fill",stylers:[{visibility:"off"}]},{featureType:"poi",elementType:"labels.text.fill",stylers:[{visibility:"off"}]},{featureType:"road",elementType:"geometry",stylers:[{visibility:"off"}]},{featureType:"road",elementType:"geometry.stroke",stylers:[{visibility:"off"}]},{featureType:"road",elementType:"labels",stylers:[{visibility:"off"}]},{featureType:"road.highway",elementType:"geometry",stylers:[{visibility:"off"}]},{featureType:"road.highway",elementType:"geometry.stroke",stylers:[{visibility:"off"}]},{featureType:"transit",elementType:"geometry",stylers:[{color:"#2f3948"}]},{featureType:"transit.station",elementType:"labels.text.fill",stylers:[{visibility:"off"}]},{featureType:"water",elementType:"geometry",stylers:[{color:"#17263c"}]},{featureType:"water",elementType:"labels.text.fill",stylers:[{color:"#515c6d"}]},{featureType:"water",elementType:"labels.text.stroke",stylers:[{color:"#17263c"}]}]}),markers.run()}